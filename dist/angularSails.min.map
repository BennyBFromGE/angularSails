{"version":3,"file":"angularSails.min.js","sources":["angularSails.js"],"names":["collection","angular","module","factory","_","ArrayProto","Array","prototype","breaker","nativeForEach","forEach","nativeKeys","Object","keys","nativeSome","some","matches","attrs","obj","key","has","hasOwnProperty","call","isObject","push","each","iterator","context","length","i","length1","j","length2","identity","value","any","predicate","result","index","list","find","findWhere","io","angularSailsIO","provider","defaultPrefix","this","$get","$q","$rootScope","$timeout","$window","asyncAngularify","socket","callback","args","arguments","apply","noop","sailsRequest","method","url","data","sailsDeferredRequest","defer","replace","reject","Error","requestJson","JSON","stringify","emit","parsedResult","parse","e","console","warn","status","resolve","promise","options","location","origin","token","authString","ioSocket","connect","prefix","defaultScope","scope","addListener","eventName","on","sailsSocket","removeListener","forward","events","prefixedEvent","forwardBroadcast","$broadcast","$on","get","path","query","post","put","delete","config","$provide","decorator","$delegate","deferred","success","fn","then","error","window","angularSailsBase","filter","input","collectionArray","val","isNaN","sailsSocketFactory","angularSailsSocket","collectionUtils","AngularSails","_resource","collectionCounter","_reourceId","slice","socketModelCid","undefined","construct","self","res","isArray","_constructCollection","_constructModel","_getModel","modelId","model","cid","id","isString","parseInt","isNumber","_getAttributes","attributes","charAt","_updateModel","verb","fromSocket","$collection","oldModel","createdAt","extend","_setCollectionListeners","previous","_setModelListeners","_assignCid","object","$add","$update","updatedModel","$save","$remove","hasCollection","angularSails"],"mappings":"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"}
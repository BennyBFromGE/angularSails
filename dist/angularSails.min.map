{"version":3,"file":"angularSails.min.js","sources":["angularSails.js"],"names":["collection","angular","module","factory","_","ArrayProto","Array","prototype","breaker","nativeForEach","forEach","nativeKeys","Object","keys","nativeSome","some","matches","attrs","obj","key","has","hasOwnProperty","call","isObject","push","each","iterator","context","length","i","length1","j","length2","identity","value","any","predicate","result","index","list","find","findWhere","constant","version","platform","language","flavor","$SAILS_CONNECTION_METADATA_PARAMS","$SAILS_SDK_PARAMS","_getVersionString","versionString","console","log","getVersionString","$window","io","Error","provider","SailsSocketFactory","$q","$timeout","SocketIo","$SAILS_SDK_INFO","TmpSocket","boundEvents","this","socket","connected","on","evName","fn","become","actualSocket","eventName","SailsResponse","requestContext","responseCtx","data","body","headers","status","statusCode","config","_sendRequest","requestCtx","response","sailsEndpoint","method","emit","tick","serverResponse","reject","resolve","callback","args","arguments","apply","noop","toString","toPOJO","SailsSocket","options","self","_requestQueue","_socketOptions","_socket","connect","url","opts","connection","defer","baseUrl","undefined","query","queuedRequest","once","notify","promise","isConnected","get","thissa","_request","post","usage","replace","request","success","then","error","_self","sailSocket","$get","angularSailsBase","filter","input","collectionArray","val","isNaN","sailsSocketFactory","angularSailsSocket","collectionUtils","AngularSails","_resource","collectionCounter","_reourceId","slice","socketModelCid","construct","res","isArray","_constructCollection","_constructModel","_getModel","modelId","model","cid","id","isString","parseInt","isNumber","_getAttributes","attributes","charAt","_updateModel","verb","fromSocket","$collection","oldModel","createdAt","extend","_setCollectionListeners","previous","_setModelListeners","_assignCid","object","$add","$update","put","updatedModel","$save","$remove","delete","hasCollection","angularSails"],"mappings":"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"}
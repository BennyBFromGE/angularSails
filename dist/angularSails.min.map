{"version":3,"file":"angularSails.min.js","sources":["angularSails.js"],"names":["collection","angular","module","factory","_","ArrayProto","Array","prototype","breaker","nativeForEach","forEach","nativeKeys","Object","keys","nativeSome","some","matches","attrs","obj","key","has","hasOwnProperty","call","isObject","push","each","iterator","context","length","i","length1","j","length2","identity","value","any","predicate","result","index","list","find","findWhere","io","angularSailsIO","provider","defaultPrefix","this","$get","$q","$rootScope","$timeout","$window","asyncAngularify","socket","callback","args","arguments","apply","noop","sailsRequest","method","url","data","sailsDeferredRequest","defer","replace","reject","Error","requestJson","JSON","stringify","emit","parsedResult","parse","e","console","warn","status","resolve","promise","options","location","origin","token","authString","ioSocket","connect","prefix","defaultScope","scope","addListener","eventName","on","sailsSocket","removeListener","forward","events","prefixedEvent","forwardBroadcast","$broadcast","$on","get","path","query","post","put","delete","window","angularSailsBase","filter","input","collectionArray","val","isNaN","sailsSocketFactory","angularSailsSocket","collectionUtils","AngularSails","_resource","collectionCounter","_reourceId","slice","socketModelCid","undefined","construct","self","then","res","isArray","_constructCollection","_constructModel","_getModel","modelId","model","cid","id","isString","parseInt","isNumber","_getAttributes","attributes","charAt","_updateModel","verb","fromSocket","$collection","oldModel","createdAt","extend","_setCollectionListeners","previous","_setModelListeners","_assignCid","object","$add","$update","updatedModel","$save","$remove","hasCollection","angularSails"],"mappings":"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"}